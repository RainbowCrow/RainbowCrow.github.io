<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <canvas id="canvas"></canvas>
    <script>
        var canvas = document.getElementById("canvas");
        var c = canvas.getContext('2d');

        canvas.width = innerWidth;
        canvas.height = innerHeight;

        class square_circle {
            constructor(x, y, r) {
                this.x = x;
                this.y = y;
                this.r = r;
            }

            draw() {
                c.beginPath();
                c.fillStyle = rgb();
                c.arc(this.x, this.y, this.r, 0, Math.PI * 2, true);
                c.fill();
                c.fillStyle = rgb();
                c.fillRect(this.x - this.r / Math.sqrt(2), this.y - this.r / Math.sqrt(2), this.r * Math.sqrt(2), this.r * Math.sqrt(2));
            }
        }
        var store = [];
        var x = canvas.width / 2;
        var y = canvas.height / 2;
        var r = 200;

        var new1 = new square_circle(x, y, r);
        store.push(new1);

        function create_element(N) {
            for (i = 1; i < N; i++) {
                store.push(new square_circle(x, y, store[i - 1].r / Math.sqrt(2)));
            }
        }

        function drawLoop() {
            c.clearRect(0, 0, canvas.width, canvas.height);
            for (let element of store) {
                element.draw();
            }
        }

        function rgb() {
            color = 'rgb(';
            for (var i = 0; i < 3; i++) {
                color += Math.floor(Math.random() * 255) + ',';
            }
            return color.replace(/\,$/, ')');
        }

        create_element(5);
        drawLoop();
    </script>
</body>

</html>